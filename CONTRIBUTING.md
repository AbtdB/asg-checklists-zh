# 如何参与翻译

## 环境搭建

需要的软件如下：

- ASG
  - 显然。
- JDK ≥ 11
  - 以下工具均使用 Java 开发。
- OmegaT ≥ 4.3.1
  - <http://omegat.org/>
  - 计算机辅助翻译（CAT）软件。
- Tikal
  - <https://okapiframework.org/wiki/index.php/Tikal>
  - 下载 `okapi-apps_xxx.zip`，解压其内容到本项目 `okapi_bin` 下备用。
  - Okapi 框架提供的工具，用于导出、合并 XLIFF 文件。Okapi 是一套用于本地化和翻译工作的开源组件和工具集。

开始前，还需要设置环境变量 `ASG_HOME=<你的 ASG 所在路径>`，以便脚本获取英文检查单文件。

## 工作流

建议遵循 [Github Flow](https://docs.github.com/zh/get-started/quickstart/github-flow)。

### 提取 XLIFF

注意：只有英文检查单有更新时，才需要执行这步操作来更新 `omegat/source` 下的 XLIFF。

开始翻译一版新的检查单之前，需要先提取、过滤文件中需要翻译的内容，生成含有原文片段、上下文等信息的『翻译单元』。XLIFF 是一种基于 XML 储存翻译单元的文件格式。

我们使用 Tikal 读取英文检查单，并应用项目根目录下定义的 `okf_xml@asgChecklists` 过滤器，筛选出检查单中需要翻译的文本片段，保存为 XLIFF 供 OmegaT 翻译。

运行项目根目录下的 `extractxlf.cmd`，它将自动从 `ASG_HOME` 读取英文检查单文件，调用 Tikal 提取、过滤 XLIFF，并输出到 `omegat/source` 下供 OmegatT 翻译。

### 翻译

启动 OmegaT，单击 `项目 > 打开...` 打开项目根目录下的 `omegat` 文件夹，开始翻译之前生成的 XLIFF 文件。

具体请参阅 OmegaT 的用户手册（`帮助 > 用户手册...`）。

### 构建译文文件

翻译完成后，在 OmegaT 中单击 `项目 > 创建译文文档`，OmegaT 会在 `omegat/target` 目录下生成存有译文的 XLIFF 文件。最后，我们再次使用 Tikal，将译文 XLIFF 与原始检查单文件合并，输出最终的中文检查单。

运行项目根目录下的 `build.cmd`，它将调用 Tikal，从 `ASG_HOME` 和 `omegat/target` 分别读取英文检查单和译文 XLIFF，生成中文检查单并输出至 `release` 文件夹。

## 标点符号使用

### 原则

1. 中文句子视为一个中文环境，该环境内标点原则上都用中文/全角符号，这样可以与全角文字保持视觉的一致。
2. 如果整句为英文，视为一个英文环境，该环境内标点使用英文/半角符号。
3. 不同环境互相包裹的情况，环境分界处使用外部环境的标点，环境内部使用各自的标点。
4. 句号、问号、叹号、逗号、顿号、分号和冒号不得出现在一行之首。
5. 原文标点使用不规范的（如：句末缺少句号），翻译时应加以更正。

### 引号

1. 因弯引号在游戏内显示效果较差，中文环境内应使用直角双引号（『』）和直角单引号（「」），双引号在外，单引号在内。禁止使用弯双引号（“”）和弯单引号（‘’）。

### 空格

1. 原则上中英环境交界处若没有标点符号，则应留有空格。
2. 原则上数字-文本交界处应留有空格，包括数值与计量单位之间。

### 逗号

1. 技术名词的英文全称和英文缩写相邻时，视为同一英文环境，使用英文逗号分隔（例：deoxyribonucleic acid, DNA）。

### 顿号

1. 中文环境内，连续的英文成分呈并列关系时，视为各自独立的英文环境，用中文顿号分隔（例：TPV、DEC 和 APU 都接入设备汇流条。）。
2. 上述并列成分若被引号包裹，其间顿号可以省略。

### 句号

1. 中文语句的结尾处应该用全角句号（。）。
2. 句子末尾用括号加注时，句号应在括号之外。
